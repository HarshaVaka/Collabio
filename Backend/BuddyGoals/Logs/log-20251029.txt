2025-10-29 08:12:50.735 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 08:12:50.761 +05:30 [INF] CORS policy execution successful.
2025-10-29 08:12:50.763 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 08:12:50.781 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 08:12:50.809 +05:30 [INF] Refresh token attempt
2025-10-29 08:12:52.022 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 08:12:52.196 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 08:12:52.291 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 08:12:52.386 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 08:12:52.412 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 08:12:52.425 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1638.5379ms
2025-10-29 08:12:52.436 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 08:12:52.444 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 1716.2856ms
2025-10-29 08:12:52.493 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 08:12:52.505 +05:30 [INF] CORS policy execution successful.
2025-10-29 08:12:52.507 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 08:12:52.512 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 08:12:52.515 +05:30 [INF] Refresh token attempt
2025-10-29 08:12:52.579 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 08:12:52.655 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 08:12:52.722 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 08:12:52.787 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 08:12:52.794 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 08:12:52.800 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 285.1159ms
2025-10-29 08:12:52.805 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 08:12:52.809 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 316.5918ms
2025-10-29 10:31:30.198 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 10:31:30.216 +05:30 [INF] CORS policy execution successful.
2025-10-29 10:31:30.222 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 10:31:30.226 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 10:31:30.235 +05:30 [INF] Refresh token attempt
2025-10-29 10:31:31.199 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 10:31:31.283 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 10:31:31.352 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 10:31:31.423 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 10:31:31.434 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 10:31:31.441 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1209.7438ms
2025-10-29 10:31:31.443 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 10:31:31.445 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 1248.8951ms
2025-10-29 10:31:31.461 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 10:31:31.464 +05:30 [INF] CORS policy execution successful.
2025-10-29 10:31:31.464 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 10:31:31.465 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 10:31:31.467 +05:30 [INF] Refresh token attempt
2025-10-29 10:31:31.518 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 10:31:31.580 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 10:31:31.652 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 10:31:31.712 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 10:31:31.716 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 10:31:31.718 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 251.2608ms
2025-10-29 10:31:31.721 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 10:31:31.724 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 262.5202ms
2025-10-29 10:32:02.135 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 10:32:02.163 +05:30 [INF] CORS policy execution successful.
2025-10-29 10:32:02.169 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 36.4848ms
2025-10-29 10:32:02.197 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 10:32:02.225 +05:30 [INF] CORS policy execution successful.
2025-10-29 10:32:02.230 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 10:32:02.234 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 10:32:02.260 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 10:32:02.321 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 10:32:02.391 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 10:32:02.404 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 10:32:02.408 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 167.2515ms
2025-10-29 10:32:02.412 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 10:32:02.415 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 218.6444ms
2025-10-29 14:18:38.949 +05:30 [INF] User profile is available. Using 'C:\Users\e40014794\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-29 14:18:39.574 +05:30 [INF] Now listening on: http://localhost:5000
2025-10-29 14:18:39.580 +05:30 [INF] Now listening on: https://localhost:5001
2025-10-29 14:18:39.648 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 14:18:39.656 +05:30 [INF] Hosting environment: Development
2025-10-29 14:18:39.663 +05:30 [INF] Content root path: C:\RW_APPS\Collabio\Backend\BuddyGoals
2025-10-29 14:18:48.974 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - null null
2025-10-29 14:18:49.279 +05:30 [WRN] Unable to contact VS to retrieve Browser Link script tag.
2025-10-29 14:18:49.627 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - 200 null text/html;charset=utf-8 664.4839ms
2025-10-29 14:18:49.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-10-29 14:18:49.667 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.9587ms
2025-10-29 14:18:49.727 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - null null
2025-10-29 14:18:49.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.4995ms
2025-10-29 14:24:50.794 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:24:50.818 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:24:50.831 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:24:50.874 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:24:51.272 +05:30 [INF] Refresh token attempt
2025-10-29 14:24:53.455 +05:30 [INF] Executed DbCommand (141ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:24:53.862 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:24:54.190 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:24:54.317 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:24:54.368 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:24:54.401 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 3516.0495ms
2025-10-29 14:24:54.410 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:24:54.431 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 3637.2767ms
2025-10-29 14:24:54.482 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:24:54.501 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:24:54.504 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:24:54.509 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:24:54.519 +05:30 [INF] Refresh token attempt
2025-10-29 14:24:54.593 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:24:54.681 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:24:54.744 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:24:54.828 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:24:54.859 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:24:54.877 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 359.9035ms
2025-10-29 14:24:54.890 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:24:54.898 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 415.9184ms
2025-10-29 14:24:54.933 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:24:54.964 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:24:54.972 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 38.8317ms
2025-10-29 14:24:54.977 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:24:55.024 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:24:55.039 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:24:55.045 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:24:55.064 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:24:55.077 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:24:55.087 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 110.4887ms
2025-10-29 14:24:55.132 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:24:55.145 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:24:55.148 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:24:55.153 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:24:55.165 +05:30 [INF] Refresh token attempt
2025-10-29 14:24:55.298 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:24:55.369 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:24:55.448 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:24:55.516 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:24:55.528 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:24:55.543 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 384.8579ms
2025-10-29 14:24:55.551 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:24:55.558 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 426.429ms
2025-10-29 14:25:08.136 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 14:25:08.148 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:25:08.153 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 17.4849ms
2025-10-29 14:25:08.164 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 14:25:08.188 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:25:08.192 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:25:08.210 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:25:08.260 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 14:25:08.344 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:25:08.425 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:25:08.437 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:25:08.439 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 217.1801ms
2025-10-29 14:25:08.443 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:25:08.444 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 280.904ms
2025-10-29 14:25:08.497 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:25:08.508 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:25:08.512 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 15.3478ms
2025-10-29 14:25:08.514 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:25:08.595 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:25:08.600 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:25:08.608 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 14:25:08.623 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 4.8685ms
2025-10-29 14:25:08.636 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:25:08.734 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMOVQEPCI4:00000003
System.InvalidOperationException: Unable to resolve service for type 'BuddyGoals.Services.IServices.IUserService' while attempting to activate 'BuddyGoals.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method371(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 14:25:08.854 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 500 null application/json; charset=utf-8 340.4061ms
2025-10-29 14:26:05.622 +05:30 [INF] User profile is available. Using 'C:\Users\e40014794\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-29 14:26:06.019 +05:30 [INF] Now listening on: http://localhost:5000
2025-10-29 14:26:06.027 +05:30 [INF] Now listening on: https://localhost:5001
2025-10-29 14:26:06.099 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 14:26:06.106 +05:30 [INF] Hosting environment: Development
2025-10-29 14:26:06.113 +05:30 [INF] Content root path: C:\RW_APPS\Collabio\Backend\BuddyGoals
2025-10-29 14:26:15.344 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - null null
2025-10-29 14:26:15.804 +05:30 [WRN] Unable to contact VS to retrieve Browser Link script tag.
2025-10-29 14:26:16.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - 200 null text/html;charset=utf-8 700.576ms
2025-10-29 14:26:16.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - null null
2025-10-29 14:26:16.100 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.422ms
2025-10-29 14:26:16.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - null null
2025-10-29 14:26:16.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.295ms
2025-10-29 14:26:25.956 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:26:25.982 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:25.990 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:26:26.017 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:26:26.396 +05:30 [INF] Refresh token attempt
2025-10-29 14:26:28.182 +05:30 [INF] Executed DbCommand (125ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:26:28.410 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:26:28.646 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:26:28.786 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:26:28.851 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:26:28.875 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 2842.7389ms
2025-10-29 14:26:28.884 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:26:28.912 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 2955.9359ms
2025-10-29 14:26:28.937 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:26:28.948 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:28.951 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:26:28.954 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:26:28.960 +05:30 [INF] Refresh token attempt
2025-10-29 14:26:29.025 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:26:29.089 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:26:29.162 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:26:29.245 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:26:29.340 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:26:29.368 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 409.3773ms
2025-10-29 14:26:29.378 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:26:29.385 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 448.6243ms
2025-10-29 14:26:29.400 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:26:29.415 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:29.421 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 21.4633ms
2025-10-29 14:26:29.425 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:26:29.454 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:26:29.465 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:26:29.470 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:29.473 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:26:29.476 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:26:29.482 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 57.8125ms
2025-10-29 14:26:29.498 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:26:29.508 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:29.510 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:26:29.513 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:26:29.525 +05:30 [INF] Refresh token attempt
2025-10-29 14:26:29.664 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:26:29.732 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:26:29.801 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:26:29.867 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:26:29.875 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:26:29.881 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 362.0183ms
2025-10-29 14:26:29.883 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:26:29.884 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 386.5243ms
2025-10-29 14:26:47.802 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 14:26:47.816 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:47.819 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 18.7544ms
2025-10-29 14:26:47.823 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 14:26:47.841 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:47.843 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:26:47.859 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:26:47.904 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 14:26:47.988 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:26:48.056 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:26:48.064 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:26:48.068 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 201.7064ms
2025-10-29 14:26:48.072 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:26:48.075 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 252.3486ms
2025-10-29 14:26:48.128 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:26:48.140 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:48.144 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 17.4442ms
2025-10-29 14:26:48.148 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:26:48.217 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:26:48.223 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:26:48.234 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 14:26:48.260 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 14:26:48.379 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 14:26:48.393 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 14:26:48.400 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 162.4534ms
2025-10-29 14:26:48.406 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:26:48.412 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 264.1496ms
2025-10-29 14:28:17.053 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:28:17.066 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:17.067 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:17.068 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:17.070 +05:30 [INF] Refresh token attempt
2025-10-29 14:28:17.124 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:28:17.190 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:17.252 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:28:17.311 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:17.322 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:17.324 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 254.1573ms
2025-10-29 14:28:17.325 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:17.328 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 275.84ms
2025-10-29 14:28:17.363 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:28:17.369 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:17.372 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:17.376 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:17.382 +05:30 [INF] Refresh token attempt
2025-10-29 14:28:17.436 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:28:17.500 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:17.557 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:28:17.614 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:17.619 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:17.624 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 242.2852ms
2025-10-29 14:28:17.627 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:17.629 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 266.7986ms
2025-10-29 14:28:17.643 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:28:17.647 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:17.648 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 5.2307ms
2025-10-29 14:28:17.650 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:28:17.653 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:28:17.655 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:28:17.656 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:17.658 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:28:17.659 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:28:17.660 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 10.4469ms
2025-10-29 14:28:17.673 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:28:17.675 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:17.676 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:17.677 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:17.680 +05:30 [INF] Refresh token attempt
2025-10-29 14:28:17.733 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:28:17.789 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:17.846 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:28:17.901 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:17.905 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:17.907 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 228.0155ms
2025-10-29 14:28:17.909 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:17.910 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 237.5507ms
2025-10-29 14:28:32.157 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:28:32.160 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:32.161 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:32.162 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:32.165 +05:30 [INF] Refresh token attempt
2025-10-29 14:28:32.220 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:28:32.277 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:32.342 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:28:32.409 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:32.414 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:32.420 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 255.3999ms
2025-10-29 14:28:32.423 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:32.424 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 266.8516ms
2025-10-29 14:28:32.456 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:28:32.462 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:32.463 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:32.464 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:32.468 +05:30 [INF] Refresh token attempt
2025-10-29 14:28:32.522 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:28:32.578 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:32.632 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:28:32.693 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:32.697 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:32.699 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 231.831ms
2025-10-29 14:28:32.702 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:32.704 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 247.9179ms
2025-10-29 14:28:32.711 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:28:32.720 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:32.724 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 13.0378ms
2025-10-29 14:28:32.727 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:28:32.747 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:28:32.751 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:28:32.753 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:32.755 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:28:32.757 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:28:32.758 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 31.3499ms
2025-10-29 14:28:32.771 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:28:32.774 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:32.775 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:32.775 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:32.778 +05:30 [INF] Refresh token attempt
2025-10-29 14:28:32.832 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:28:32.888 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:32.988 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:28:33.055 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:33.058 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:33.060 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 281.7476ms
2025-10-29 14:28:33.061 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:28:33.062 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 291.4118ms
2025-10-29 14:28:41.712 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 14:28:41.727 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:41.732 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 20.4001ms
2025-10-29 14:28:41.745 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 14:28:41.772 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:41.773 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:28:41.776 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:28:41.787 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 14:28:41.845 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:28:41.911 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:28:41.924 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:28:41.927 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 142.0838ms
2025-10-29 14:28:41.934 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:28:41.935 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 189.6926ms
2025-10-29 14:28:41.985 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:28:42.002 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:42.006 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 21.4675ms
2025-10-29 14:28:42.011 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:28:42.028 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:28:42.032 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:28:42.034 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 14:28:42.037 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 14:28:42.091 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 14:28:42.108 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 14:28:42.114 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 77.7625ms
2025-10-29 14:28:42.118 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:28:42.119 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 108.7559ms
2025-10-29 14:29:58.068 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:29:58.072 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:29:58.073 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 4.6623ms
2025-10-29 14:29:58.082 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:29:58.086 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:29:58.088 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:29:58.089 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 14:29:58.092 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 14:29:58.150 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 14:29:58.157 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 14:29:58.159 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 67.6197ms
2025-10-29 14:29:58.160 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:29:58.161 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 78.7957ms
2025-10-29 14:30:09.363 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:30:09.373 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:09.376 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:30:09.381 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:30:09.392 +05:30 [INF] Refresh token attempt
2025-10-29 14:30:09.464 +05:30 [INF] Executed DbCommand (69ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:30:09.553 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:30:09.630 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:30:09.721 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:30:09.736 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:30:09.746 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 353.6097ms
2025-10-29 14:30:09.752 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:30:09.757 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 393.9401ms
2025-10-29 14:30:09.779 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:30:09.789 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:09.795 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:30:09.799 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:30:09.807 +05:30 [INF] Refresh token attempt
2025-10-29 14:30:09.882 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:30:09.965 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:30:10.053 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:30:10.131 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:30:10.147 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:30:10.162 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 354.8545ms
2025-10-29 14:30:10.168 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:30:10.180 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 400.8622ms
2025-10-29 14:30:10.210 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:30:10.222 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:10.223 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 13.0344ms
2025-10-29 14:30:10.226 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:30:10.240 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:30:10.244 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:30:10.246 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:10.248 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:30:10.249 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:30:10.250 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 25.295ms
2025-10-29 14:30:10.260 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:30:10.264 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:10.266 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:30:10.267 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:30:10.270 +05:30 [INF] Refresh token attempt
2025-10-29 14:30:10.339 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:30:10.415 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:30:10.501 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:30:10.573 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:30:10.583 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:30:10.587 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 317.3593ms
2025-10-29 14:30:10.591 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:30:10.592 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 332.0048ms
2025-10-29 14:30:24.080 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 14:30:24.091 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:24.096 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 16.2209ms
2025-10-29 14:30:24.105 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 14:30:24.114 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:24.115 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:30:24.116 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:30:24.120 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 14:30:24.181 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:30:24.243 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:30:24.253 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:30:24.256 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 137.1988ms
2025-10-29 14:30:24.264 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:30:24.267 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 161.9808ms
2025-10-29 14:30:24.303 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:30:24.313 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:24.318 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 15.1593ms
2025-10-29 14:30:24.320 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:30:24.336 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:30:24.340 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:30:24.342 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 14:30:24.349 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 14:30:24.409 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 14:30:24.415 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 14:30:24.418 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 69.4349ms
2025-10-29 14:30:24.423 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:30:24.425 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 104.5973ms
2025-10-29 14:39:12.795 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:39:12.821 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:39:12.825 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:39:12.829 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:39:12.832 +05:30 [INF] Refresh token attempt
2025-10-29 14:39:13.728 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:39:13.821 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:39:13.924 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:39:13.997 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:39:14.089 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:39:14.120 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1287.4876ms
2025-10-29 14:39:14.151 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:39:14.155 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 1359.5154ms
2025-10-29 14:39:14.199 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:39:14.203 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:39:14.204 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:39:14.205 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:39:14.208 +05:30 [INF] Refresh token attempt
2025-10-29 14:39:14.264 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:39:14.331 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:39:14.398 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:39:14.508 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:39:14.521 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:39:14.524 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 316.5331ms
2025-10-29 14:39:14.531 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:39:14.536 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 337.534ms
2025-10-29 14:39:14.551 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:39:14.570 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:39:14.571 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 20.0244ms
2025-10-29 14:39:14.574 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:39:14.578 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:39:14.582 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:39:14.584 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:39:14.585 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:39:14.586 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:39:14.587 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 13.6232ms
2025-10-29 14:39:14.612 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:39:14.618 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:39:14.619 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:39:14.620 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:39:14.622 +05:30 [INF] Refresh token attempt
2025-10-29 14:39:14.688 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:39:14.751 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:39:14.816 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:39:14.894 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:39:14.902 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:39:14.910 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 287.5893ms
2025-10-29 14:39:14.912 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:39:14.917 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 305.7066ms
2025-10-29 14:40:08.476 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 14:40:08.519 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:40:08.524 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 48.7604ms
2025-10-29 14:40:08.527 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 14:40:08.544 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:40:08.545 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:40:08.546 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:40:08.548 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 14:40:08.612 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:40:08.691 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:40:08.704 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:40:08.708 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 160.839ms
2025-10-29 14:40:08.713 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 14:40:08.714 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 187.5601ms
2025-10-29 14:40:08.752 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:40:08.756 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:40:08.756 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 4.3384ms
2025-10-29 14:40:08.758 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:40:08.773 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:40:08.774 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:40:08.774 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 14:40:08.779 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 14:40:08.843 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 14:40:08.847 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 14:40:08.850 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 71.2274ms
2025-10-29 14:40:08.854 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 14:40:08.855 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 97.2226ms
2025-10-29 14:55:14.349 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:55:14.361 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:55:14.366 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:55:14.371 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:55:14.377 +05:30 [INF] Refresh token attempt
2025-10-29 14:55:15.209 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:55:15.324 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:55:15.401 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:55:15.475 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:55:15.520 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:55:15.533 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1157.0892ms
2025-10-29 14:55:15.544 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:55:15.553 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 1205.5423ms
2025-10-29 14:55:15.593 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:55:15.608 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:55:15.614 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:55:15.618 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:55:15.627 +05:30 [INF] Refresh token attempt
2025-10-29 14:55:15.684 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:55:15.757 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:55:15.820 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:55:15.886 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:55:15.902 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:55:15.916 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 288.9225ms
2025-10-29 14:55:15.923 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:55:15.930 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 337.7971ms
2025-10-29 14:55:15.939 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 14:55:15.975 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:55:15.976 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 39.222ms
2025-10-29 14:55:15.981 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 14:55:16.006 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 14:55:16.015 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 14:55:16.020 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:55:16.025 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 14:55:16.029 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 14:55:16.033 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 52.6047ms
2025-10-29 14:55:16.063 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:55:16.074 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:55:16.075 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:55:16.077 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:55:16.083 +05:30 [INF] Refresh token attempt
2025-10-29 14:55:16.144 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:55:16.206 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 14:55:16.271 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 14:55:16.336 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 14:55:16.342 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 14:55:16.347 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 264.4846ms
2025-10-29 14:55:16.351 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:55:16.354 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 292.4814ms
2025-10-29 14:56:06.079 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 14:56:06.099 +05:30 [INF] CORS policy execution successful.
2025-10-29 14:56:06.103 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:56:06.109 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 14:56:06.117 +05:30 [INF] Refresh token attempt
2025-10-29 14:56:06.172 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 14:56:06.306 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 190.1831ms
2025-10-29 14:56:06.314 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 14:56:06.383 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGE:00000015
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 14:56:06.428 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 349.6365ms
2025-10-29 15:04:11.144 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:04:11.155 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:04:11.157 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:04:11.158 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:04:11.160 +05:30 [INF] Refresh token attempt
2025-10-29 15:04:12.066 +05:30 [INF] Executed DbCommand (100ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:04:12.122 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 961.5473ms
2025-10-29 15:04:12.124 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:04:12.173 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGG:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 15:04:12.192 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 1048.5101ms
2025-10-29 15:06:09.982 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:06:09.998 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:10.001 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:06:10.003 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:06:10.006 +05:30 [INF] Refresh token attempt
2025-10-29 15:06:10.061 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:06:10.103 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 96.4943ms
2025-10-29 15:06:10.108 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:06:10.159 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGG:00000003
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 15:06:10.203 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 220.0935ms
2025-10-29 15:06:21.652 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:06:21.663 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:21.664 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:06:21.666 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:06:21.670 +05:30 [INF] Refresh token attempt
2025-10-29 15:06:21.725 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:06:21.786 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 116.1439ms
2025-10-29 15:06:21.788 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:06:21.834 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGH:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 15:06:21.852 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 200.0483ms
2025-10-29 15:06:32.972 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 15:06:32.987 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:32.990 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 19.0042ms
2025-10-29 15:06:32.998 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 15:06:33.015 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:33.017 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 15:06:33.018 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:06:33.021 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 15:06:33.107 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:06:33.182 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:06:33.185 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:06:33.187 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 166.3969ms
2025-10-29 15:06:33.190 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 15:06:33.191 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 193.2776ms
2025-10-29 15:06:33.204 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 15:06:33.210 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:33.211 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 7.2286ms
2025-10-29 15:06:33.212 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 15:06:33.219 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:33.220 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 15:06:33.222 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 15:06:33.225 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 15:06:33.283 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 15:06:33.288 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 15:06:33.291 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 66.2663ms
2025-10-29 15:06:33.296 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 15:06:33.298 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 86.1781ms
2025-10-29 15:06:38.134 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:06:38.143 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:38.148 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:06:38.153 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:06:38.162 +05:30 [INF] Refresh token attempt
2025-10-29 15:06:38.218 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:06:38.274 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:06:38.336 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 15:06:38.405 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:06:38.417 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:06:38.420 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 258.4555ms
2025-10-29 15:06:38.426 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:06:38.427 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 293.9597ms
2025-10-29 15:06:38.433 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 15:06:38.449 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:38.451 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 18.0747ms
2025-10-29 15:06:38.454 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 15:06:38.461 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 15:06:38.464 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 15:06:38.466 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:06:38.467 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 15:06:38.468 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 15:06:38.470 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 17.4042ms
2025-10-29 15:07:26.810 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:07:26.823 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:26.827 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:07:26.829 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:07:26.838 +05:30 [INF] Refresh token attempt
2025-10-29 15:07:26.901 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:07:26.958 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:07:27.019 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 15:07:27.080 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:07:27.087 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:07:27.091 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 252.854ms
2025-10-29 15:07:27.092 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:07:27.093 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 283.4304ms
2025-10-29 15:07:42.038 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:07:42.041 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:42.041 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:07:42.042 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:07:42.045 +05:30 [INF] Refresh token attempt
2025-10-29 15:07:42.095 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:07:42.128 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 83.3411ms
2025-10-29 15:07:42.130 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:07:42.165 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGJ:0000000B
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 15:07:42.173 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 135.2139ms
2025-10-29 15:07:49.803 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 15:07:49.807 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:49.808 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 5.8965ms
2025-10-29 15:07:49.809 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 15:07:49.817 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:49.818 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 15:07:49.819 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:07:49.821 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 15:07:49.875 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:07:49.942 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:07:49.957 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:07:49.964 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 143.4553ms
2025-10-29 15:07:49.971 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 15:07:49.974 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 164.3128ms
2025-10-29 15:07:49.990 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 15:07:49.998 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:50.000 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 9.9383ms
2025-10-29 15:07:50.001 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 15:07:50.007 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:50.009 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 15:07:50.010 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 15:07:50.012 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 15:07:50.061 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 15:07:50.075 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 15:07:50.085 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 72.817ms
2025-10-29 15:07:50.090 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 15:07:50.095 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 93.9013ms
2025-10-29 15:07:54.219 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:07:54.222 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:54.224 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:07:54.225 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:07:54.227 +05:30 [INF] Refresh token attempt
2025-10-29 15:07:54.282 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:07:54.352 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:07:54.404 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 15:07:54.466 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:07:54.478 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:07:54.483 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 256.2925ms
2025-10-29 15:07:54.486 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:07:54.487 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 267.8106ms
2025-10-29 15:07:54.492 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 15:07:54.501 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 15:07:54.505 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 15:07:54.508 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:07:54.509 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 15:07:54.510 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 15:07:54.511 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 19.7733ms
2025-10-29 15:08:34.410 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:08:34.424 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:34.425 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:34.426 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:08:34.428 +05:30 [INF] Refresh token attempt
2025-10-29 15:08:34.484 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:08:34.539 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:08:34.599 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 15:08:34.651 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:08:34.656 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:08:34.661 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 233.0513ms
2025-10-29 15:08:34.665 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:34.668 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 257.905ms
2025-10-29 15:08:37.953 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:08:37.963 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:37.964 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:37.966 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:08:37.967 +05:30 [INF] Refresh token attempt
2025-10-29 15:08:38.018 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:08:38.080 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 113.0652ms
2025-10-29 15:08:38.095 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:38.143 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGJ:00000017
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 15:08:38.163 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 213.0351ms
2025-10-29 15:08:44.844 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 15:08:44.855 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:44.859 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 15.1837ms
2025-10-29 15:08:44.862 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 15:08:44.868 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:44.869 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 15:08:44.870 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:08:44.873 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 15:08:44.926 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:08:44.981 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:08:44.991 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:08:44.993 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 121.0534ms
2025-10-29 15:08:44.999 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 15:08:45.003 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 142.0841ms
2025-10-29 15:08:45.051 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 15:08:45.058 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:45.061 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 9.7427ms
2025-10-29 15:08:45.064 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 15:08:45.086 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:45.087 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 15:08:45.088 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 15:08:45.090 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 15:08:45.143 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 15:08:45.148 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 15:08:45.149 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 59.2532ms
2025-10-29 15:08:45.154 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 15:08:45.156 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 92.8708ms
2025-10-29 15:08:52.110 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:08:52.120 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:52.123 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:52.124 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:08:52.126 +05:30 [INF] Refresh token attempt
2025-10-29 15:08:52.176 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:08:52.230 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:08:52.310 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 15:08:52.374 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:08:52.411 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:08:52.420 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 294.2026ms
2025-10-29 15:08:52.440 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:52.448 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 337.9204ms
2025-10-29 15:08:52.482 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 15:08:52.490 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:52.496 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:52.501 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 15:08:52.503 +05:30 [INF] Refresh token attempt
2025-10-29 15:08:52.559 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 15:08:52.622 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 15:08:52.681 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 15:08:52.740 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 15:08:52.756 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 15:08:52.765 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 261.8044ms
2025-10-29 15:08:52.769 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 15:08:52.776 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 294.5539ms
2025-10-29 15:08:52.782 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 15:08:52.796 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:52.797 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 14.8004ms
2025-10-29 15:08:52.799 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 15:08:52.810 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 15:08:52.811 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 15:08:52.812 +05:30 [INF] CORS policy execution successful.
2025-10-29 15:08:52.813 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 15:08:52.814 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 15:08:52.815 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 16.3446ms
2025-10-29 16:33:33.727 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:33:33.746 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:33.748 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:33:33.751 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:33:33.757 +05:30 [INF] Refresh token attempt
2025-10-29 16:33:34.791 +05:30 [INF] Executed DbCommand (112ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:33:34.905 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:33:34.975 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:33:35.056 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:33:35.089 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:33:35.099 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1343.106ms
2025-10-29 16:33:35.104 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:33:35.105 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 1378.4947ms
2025-10-29 16:33:37.543 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:33:37.548 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:37.549 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:33:37.550 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:33:37.552 +05:30 [INF] Refresh token attempt
2025-10-29 16:33:37.607 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:33:37.668 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:33:37.729 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:33:37.790 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:33:37.802 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:33:37.808 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 255.9005ms
2025-10-29 16:33:37.811 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:33:37.814 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 271.5611ms
2025-10-29 16:33:37.821 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:33:37.838 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:37.839 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 18.2168ms
2025-10-29 16:33:37.842 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:33:37.851 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 16:33:37.853 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 16:33:37.855 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:37.857 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 16:33:37.858 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 16:33:37.860 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 19.0361ms
2025-10-29 16:33:40.617 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:33:40.622 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:40.625 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:33:40.628 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:33:40.633 +05:30 [INF] Refresh token attempt
2025-10-29 16:33:40.694 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:33:40.788 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:33:40.855 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:33:40.945 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:33:40.957 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:33:40.964 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 331.2329ms
2025-10-29 16:33:40.970 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:33:40.973 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 355.5772ms
2025-10-29 16:33:46.908 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 16:33:46.925 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:46.925 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 17.5555ms
2025-10-29 16:33:46.927 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 16:33:46.936 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:46.937 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 16:33:46.938 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:33:46.941 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 16:33:47.001 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:33:47.109 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:33:47.122 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:33:47.125 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 184.5629ms
2025-10-29 16:33:47.130 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 16:33:47.132 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 204.9557ms
2025-10-29 16:33:47.152 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:33:47.162 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:47.164 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 12.4369ms
2025-10-29 16:33:47.166 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:33:47.173 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:33:47.175 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:33:47.176 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:33:47.177 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:33:47.233 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:33:47.237 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:33:47.240 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 62.4651ms
2025-10-29 16:33:47.243 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:33:47.246 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 80.5351ms
2025-10-29 16:35:17.074 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:35:17.085 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:35:17.086 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:35:17.087 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:35:17.088 +05:30 [INF] Refresh token attempt
2025-10-29 16:35:17.145 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:35:17.212 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:35:17.288 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:35:17.357 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:35:17.371 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:35:17.379 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 291.4961ms
2025-10-29 16:35:17.385 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:35:17.391 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 317.0221ms
2025-10-29 16:35:17.420 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:35:17.430 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:35:17.435 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:35:17.440 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:35:17.444 +05:30 [INF] Refresh token attempt
2025-10-29 16:35:17.499 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:35:17.579 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:35:17.652 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:35:17.720 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:35:17.734 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:35:17.741 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 296.9926ms
2025-10-29 16:35:17.748 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:35:17.755 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 335.1318ms
2025-10-29 16:35:17.775 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:35:17.799 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:35:17.802 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 27.1606ms
2025-10-29 16:35:17.805 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:35:17.824 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 16:35:17.834 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 16:35:17.840 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:35:17.842 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 16:35:17.843 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 16:35:17.847 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 42.3095ms
2025-10-29 16:35:43.633 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:35:43.649 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:35:43.654 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:35:43.659 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:35:43.668 +05:30 [INF] Refresh token attempt
2025-10-29 16:35:43.726 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:35:43.804 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:35:43.872 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:35:43.939 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:35:43.950 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:35:43.955 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 287.6375ms
2025-10-29 16:35:43.962 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:35:43.966 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 336.975ms
2025-10-29 16:36:27.903 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:36:27.917 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:36:27.919 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:36:27.923 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:36:27.926 +05:30 [INF] Refresh token attempt
2025-10-29 16:36:27.991 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:36:28.055 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:36:28.121 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:36:28.191 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:36:28.202 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:36:28.209 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 282.8969ms
2025-10-29 16:36:28.214 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:36:28.218 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 314.8006ms
2025-10-29 16:36:28.249 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:36:28.263 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:36:28.267 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:36:28.273 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:36:28.283 +05:30 [INF] Refresh token attempt
2025-10-29 16:36:28.346 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:36:28.412 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:36:28.475 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:36:28.544 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:36:28.552 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:36:28.555 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 273.0346ms
2025-10-29 16:36:28.563 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:36:28.576 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 327.4125ms
2025-10-29 16:36:28.591 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:36:28.610 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:36:28.615 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 24.7526ms
2025-10-29 16:36:28.618 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:36:28.639 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 16:36:28.649 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 16:36:28.656 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:36:28.660 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 16:36:28.666 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 16:36:28.669 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 50.8541ms
2025-10-29 16:37:44.823 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:37:44.838 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:37:44.840 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:37:44.841 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:37:44.842 +05:30 [INF] Refresh token attempt
2025-10-29 16:37:44.918 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:37:44.980 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:37:45.052 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:37:45.117 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:37:45.128 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:37:45.131 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 288.7628ms
2025-10-29 16:37:45.137 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:37:45.139 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 315.9833ms
2025-10-29 16:37:45.166 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:37:45.174 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:37:45.177 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:37:45.181 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:37:45.195 +05:30 [INF] Refresh token attempt
2025-10-29 16:37:45.257 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:37:45.341 +05:30 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:37:45.406 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:37:45.472 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:37:45.486 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:37:45.497 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 302.0352ms
2025-10-29 16:37:45.501 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:37:45.505 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 338.8895ms
2025-10-29 16:37:45.520 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:37:45.525 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:37:45.526 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 6.6901ms
2025-10-29 16:37:45.528 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:37:45.537 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-29 16:37:45.544 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-29 16:37:45.549 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:37:45.554 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-29 16:37:45.558 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-29 16:37:45.561 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 401 0 null 33.5888ms
2025-10-29 16:38:43.490 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:38:43.518 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:38:43.522 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:38:43.525 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:38:43.529 +05:30 [INF] Refresh token attempt
2025-10-29 16:38:44.026 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:38:44.087 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:38:44.162 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:38:44.224 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:38:44.240 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:38:44.245 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 716.7204ms
2025-10-29 16:38:44.249 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:38:44.251 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 761.2748ms
2025-10-29 16:38:47.545 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:38:47.560 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:38:47.564 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:38:47.566 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:38:47.570 +05:30 [INF] Refresh token attempt
2025-10-29 16:38:47.622 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:38:47.701 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 131.5172ms
2025-10-29 16:38:47.708 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:38:47.761 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FGV:00000003
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:38:47.784 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 238.7148ms
2025-10-29 16:38:55.682 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:38:55.695 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:38:55.698 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:38:55.701 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:38:55.704 +05:30 [INF] Refresh token attempt
2025-10-29 16:38:55.766 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:38:55.841 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 136.7799ms
2025-10-29 16:38:55.847 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:38:55.876 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FH0:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:38:55.888 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 205.6556ms
2025-10-29 16:39:13.816 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:39:13.825 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:39:13.827 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:39:13.828 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:39:13.832 +05:30 [INF] Refresh token attempt
2025-10-29 16:39:13.886 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:39:13.953 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 121.4849ms
2025-10-29 16:39:13.962 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:39:14.035 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FH1:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:39:14.054 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 238.864ms
2025-10-29 16:40:03.455 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:40:03.477 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:40:03.478 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:40:03.480 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:40:03.486 +05:30 [INF] Refresh token attempt
2025-10-29 16:40:03.555 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:40:03.662 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 176.293ms
2025-10-29 16:40:03.671 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:40:03.757 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FH2:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:40:03.773 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 317.6975ms
2025-10-29 16:40:54.532 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:40:54.540 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:40:54.541 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:40:54.543 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:40:54.547 +05:30 [INF] Refresh token attempt
2025-10-29 16:40:54.609 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:40:54.680 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 135.4555ms
2025-10-29 16:40:54.686 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:40:54.751 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FH3:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:40:54.758 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 225.2096ms
2025-10-29 16:41:12.337 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:41:12.350 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:41:12.354 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:41:12.359 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:41:12.365 +05:30 [INF] Refresh token attempt
2025-10-29 16:41:12.421 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:41:12.481 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 117.008ms
2025-10-29 16:41:12.485 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:41:12.528 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FH3:00000003
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:41:12.552 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 215.6466ms
2025-10-29 16:47:54.375 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:47:54.388 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:47:54.389 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:47:54.391 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:47:54.393 +05:30 [INF] Refresh token attempt
2025-10-29 16:47:55.309 +05:30 [INF] Executed DbCommand (101ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:47:55.404 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1011.5271ms
2025-10-29 16:47:55.407 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:47:55.461 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FH4:00000001
BuddyGoals.Exceptions.ApiException: Invalid Refresh Token
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 156
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:47:55.476 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 1100.8324ms
2025-10-29 16:48:29.616 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 16:48:29.636 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:29.638 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 21.9628ms
2025-10-29 16:48:29.646 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 16:48:29.662 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:29.662 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 16:48:29.663 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:48:29.666 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 16:48:29.746 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:48:29.827 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:48:29.834 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:48:29.837 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 171.0771ms
2025-10-29 16:48:29.849 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 16:48:29.864 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 218.6698ms
2025-10-29 16:48:29.909 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:48:29.920 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:29.923 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 13.8646ms
2025-10-29 16:48:29.926 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:48:29.943 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:29.946 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:29.948 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:48:29.953 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:48:30.007 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:48:30.017 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:48:30.020 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 67.1816ms
2025-10-29 16:48:30.023 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:30.026 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 100.2628ms
2025-10-29 16:48:32.264 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:48:32.271 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:32.271 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:48:32.275 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:48:32.280 +05:30 [INF] Refresh token attempt
2025-10-29 16:48:32.337 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:48:32.393 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:48:32.452 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:48:32.511 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:48:32.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:48:32.517 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 237.7495ms
2025-10-29 16:48:32.520 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:48:32.525 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 260.6616ms
2025-10-29 16:48:44.733 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:48:44.737 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:44.741 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 9.2258ms
2025-10-29 16:48:44.749 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:48:44.761 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:44.765 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:44.770 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:48:44.775 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:48:44.830 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:48:44.838 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:48:44.842 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 67.5978ms
2025-10-29 16:48:44.847 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:44.849 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 100.1491ms
2025-10-29 16:48:50.014 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:48:50.022 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:50.025 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:48:50.030 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:48:50.036 +05:30 [INF] Refresh token attempt
2025-10-29 16:48:50.105 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:48:50.166 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:48:50.229 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:48:50.294 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:48:50.305 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:48:50.315 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 278.8229ms
2025-10-29 16:48:50.322 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:48:50.325 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 311.595ms
2025-10-29 16:48:50.352 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:48:50.360 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:50.362 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 10.2014ms
2025-10-29 16:48:50.365 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:48:50.374 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:50.376 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:50.381 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:48:50.383 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:48:50.438 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:48:50.444 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:48:50.445 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 61.8025ms
2025-10-29 16:48:50.447 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:50.448 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 83.0165ms
2025-10-29 16:48:55.414 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:48:55.421 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:55.425 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:48:55.429 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:48:55.436 +05:30 [INF] Refresh token attempt
2025-10-29 16:48:55.497 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:48:55.563 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:48:55.630 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:48:55.693 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:48:55.700 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:48:55.703 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 266.4153ms
2025-10-29 16:48:55.705 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:48:55.706 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 292.0459ms
2025-10-29 16:48:55.737 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:48:55.742 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:55.744 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 6.4885ms
2025-10-29 16:48:55.746 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:48:55.760 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:48:55.762 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:55.763 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:48:55.764 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:48:55.818 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:48:55.829 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:48:55.831 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 67.082ms
2025-10-29 16:48:55.835 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:48:55.837 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 90.8153ms
2025-10-29 16:49:01.631 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:49:01.635 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:01.636 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:49:01.639 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:49:01.642 +05:30 [INF] Refresh token attempt
2025-10-29 16:49:01.697 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:49:01.779 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:49:01.835 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:49:01.898 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:49:01.901 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:49:01.905 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 263.8724ms
2025-10-29 16:49:01.910 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:49:01.913 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 282.312ms
2025-10-29 16:49:01.949 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:49:01.953 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:01.955 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 5.86ms
2025-10-29 16:49:01.958 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:49:01.974 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:01.977 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:49:01.981 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:49:01.985 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:49:02.039 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:49:02.045 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:49:02.049 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 64.4144ms
2025-10-29 16:49:02.054 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:49:02.058 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 99.8995ms
2025-10-29 16:49:42.727 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:49:42.736 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:42.737 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:49:42.739 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:49:42.741 +05:30 [INF] Refresh token attempt
2025-10-29 16:49:42.801 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:49:42.869 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:49:42.924 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:49:42.985 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:49:42.992 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:49:42.995 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 253.8862ms
2025-10-29 16:49:42.999 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:49:43.001 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 274.8958ms
2025-10-29 16:49:43.042 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:49:43.068 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:43.071 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 28.8933ms
2025-10-29 16:49:43.076 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:49:43.085 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:43.087 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:49:43.090 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:49:43.094 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:49:43.152 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:49:43.158 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:49:43.160 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 66.9538ms
2025-10-29 16:49:43.163 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:49:43.165 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 89.5291ms
2025-10-29 16:49:58.058 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:49:58.065 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:49:58.066 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:49:58.066 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:49:58.068 +05:30 [INF] Refresh token attempt
2025-10-29 16:49:58.206 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 138.1218ms
2025-10-29 16:49:58.216 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:49:58.247 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FHD:00000001
BuddyGoals.Exceptions.ApiException: Refresh Token is missing
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress) in C:\RW_APPS\Collabio\Backend\BuddyGoals\Services\AuthService.cs:line 151
   at BuddyGoals.Controllers.AuthController.RefreshToken() in C:\RW_APPS\Collabio\Backend\BuddyGoals\Controllers\AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext) in C:\RW_APPS\Collabio\Backend\BuddyGoals\GlobalExceptionHandler.cs:line 14
2025-10-29 16:49:58.263 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 400 null application/json; charset=utf-8 205.5115ms
2025-10-29 16:50:04.660 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/auth/login - null null
2025-10-29 16:50:04.668 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:04.669 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/auth/login - 204 null null 9.129ms
2025-10-29 16:50:04.671 +05:30 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/login - application/json 55
2025-10-29 16:50:04.691 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:04.695 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 16:50:04.699 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BuddyGoals.DTOs.LoginDto) on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:50:04.708 +05:30 [INF] Registration attempt from IP: ::1
2025-10-29 16:50:04.795 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[@__mail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."Email" = @__mail_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:50:04.859 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:50:04.867 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:50:04.871 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.Login (BuddyGoals) in 164.9312ms
2025-10-29 16:50:04.876 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.Login (BuddyGoals)'
2025-10-29 16:50:04.878 +05:30 [INF] Request finished HTTP/2 POST https://localhost:5001/api/auth/login - 200 null application/json; charset=utf-8 207.3435ms
2025-10-29 16:50:04.921 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:50:04.925 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:04.927 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 6.5138ms
2025-10-29 16:50:04.930 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:50:04.937 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:04.939 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:50:04.940 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:50:04.944 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:50:05.005 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:50:05.014 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:50:05.017 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 73.4977ms
2025-10-29 16:50:05.019 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:50:05.020 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 89.8944ms
2025-10-29 16:50:07.066 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:50:07.069 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:07.071 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:50:07.072 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:50:07.075 +05:30 [INF] Refresh token attempt
2025-10-29 16:50:07.131 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:50:07.197 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:50:07.321 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:50:07.393 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:50:07.444 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:50:07.468 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 392.9067ms
2025-10-29 16:50:07.478 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:50:07.486 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 419.5525ms
2025-10-29 16:50:07.522 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:50:07.532 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:07.533 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:50:07.535 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:50:07.537 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:50:07.593 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:50:07.604 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:50:07.605 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 68.3385ms
2025-10-29 16:50:07.609 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:50:07.619 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 96.8653ms
2025-10-29 16:50:09.700 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:50:09.704 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:09.706 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:50:09.707 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:50:09.710 +05:30 [INF] Refresh token attempt
2025-10-29 16:50:09.773 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:50:09.833 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:50:09.893 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:50:09.955 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:50:09.963 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:50:09.964 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 254.3369ms
2025-10-29 16:50:09.970 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:50:09.971 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 270.7965ms
2025-10-29 16:50:09.995 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:50:10.006 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:10.011 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 16.7524ms
2025-10-29 16:50:10.015 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:50:10.037 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:50:10.040 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:50:10.043 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:50:10.053 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:50:10.112 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:50:10.125 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:50:10.133 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 80.2018ms
2025-10-29 16:50:10.140 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:50:10.147 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 132.5925ms
2025-10-29 16:55:36.111 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:55:36.129 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:55:36.130 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:55:36.132 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:55:36.135 +05:30 [INF] Refresh token attempt
2025-10-29 16:55:37.045 +05:30 [INF] Executed DbCommand (116ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:55:37.189 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:55:37.268 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:55:37.379 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:55:37.396 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:55:37.411 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 1276.1833ms
2025-10-29 16:55:37.425 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:55:37.432 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 1321.4309ms
2025-10-29 16:55:51.117 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:55:51.135 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:55:51.140 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 22.6827ms
2025-10-29 16:55:51.145 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:55:51.161 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:55:51.162 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:55:51.164 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:55:51.166 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:55:51.223 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:55:51.225 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:55:51.231 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 65.3534ms
2025-10-29 16:55:51.238 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:55:51.241 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 97.1132ms
2025-10-29 16:58:43.204 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 16:58:43.217 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:58:43.218 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:58:43.220 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 16:58:43.224 +05:30 [INF] Refresh token attempt
2025-10-29 16:58:43.275 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 16:58:43.335 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 16:58:43.400 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 16:58:43.467 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 16:58:43.480 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 16:58:43.486 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 262.8212ms
2025-10-29 16:58:43.488 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 16:58:43.491 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 287.1229ms
2025-10-29 16:58:53.120 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 16:58:53.124 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:58:53.127 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 7.1185ms
2025-10-29 16:58:53.131 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 16:58:53.155 +05:30 [INF] CORS policy execution successful.
2025-10-29 16:58:53.156 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:58:53.158 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 16:58:53.160 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 16:58:53.211 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://avatar.iran.liara.run/public/6' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 16:58:53.220 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 16:58:53.222 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 61.8228ms
2025-10-29 16:58:53.223 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 16:58:53.227 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 96.539ms
2025-10-29 17:00:52.555 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 17:00:52.576 +05:30 [INF] CORS policy execution successful.
2025-10-29 17:00:52.579 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 17:00:52.605 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 17:00:52.611 +05:30 [INF] Refresh token attempt
2025-10-29 17:00:53.014 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."RefreshTokenId", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."Revoked", r."RevokedByIp", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."Token" = @__token_0
LIMIT 1
2025-10-29 17:00:53.078 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u1."UserId", u1."CreatedAt", u1."CreatedBy", u1."Email", u1."HashedPassowrd", u1."ModifiedAt", u1."ModifiedBy", u1."UserName", s."UserId", s."RoleId", s."RoleId0", s."RoleName"
FROM (
    SELECT u."UserId", u."CreatedAt", u."CreatedBy", u."Email", u."HashedPassowrd", u."ModifiedAt", u."ModifiedBy", u."UserName"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS u1
LEFT JOIN (
    SELECT u0."UserId", u0."RoleId", r."RoleId" AS "RoleId0", r."RoleName"
    FROM "UserRoles" AS u0
    INNER JOIN "Roles" AS r ON u0."RoleId" = r."RoleId"
) AS s ON u1."UserId" = s."UserId"
ORDER BY u1."UserId", s."UserId", s."RoleId"
2025-10-29 17:00:53.140 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "CreatedAt" = @p0, "CreatedByIp" = @p1, "ExpiresAt" = @p2, "ReplacedByToken" = @p3, "Revoked" = @p4, "RevokedByIp" = @p5, "Token" = @p6, "UserId" = @p7
WHERE "RefreshTokenId" = @p8;
2025-10-29 17:00:53.207 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "Revoked", "RevokedByIp", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "RefreshTokenId";
2025-10-29 17:00:53.221 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.AuthResponseDto'.
2025-10-29 17:00:53.236 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 625.3817ms
2025-10-29 17:00:53.245 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 17:00:53.253 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 200 null application/json; charset=utf-8 698.5629ms
2025-10-29 17:00:53.294 +05:30 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/user/me - null null
2025-10-29 17:00:53.307 +05:30 [INF] CORS policy execution successful.
2025-10-29 17:00:53.312 +05:30 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/user/me - 204 null null 18.03ms
2025-10-29 17:00:53.316 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/user/me - null null
2025-10-29 17:00:53.340 +05:30 [INF] CORS policy execution successful.
2025-10-29 17:00:53.344 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 17:00:53.353 +05:30 [INF] Route matched with {action = "GetUserDetails", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserDetails() on controller BuddyGoals.Controllers.UserController (BuddyGoals).
2025-10-29 17:00:53.358 +05:30 [INF] Fetching details of user: harshavaka44
2025-10-29 17:00:53.460 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserName", u."Email", 'https://uxwing.com/wp-content/themes/uxwing/download/peoples-avatars/user-profile-icon.png' AS "ProfilePicUrl"
FROM "Users" AS u
WHERE u."UserName" = @__username_0
2025-10-29 17:00:53.471 +05:30 [INF] Executing OkObjectResult, writing value of type 'BuddyGoals.DTOs.UserDetailsDto'.
2025-10-29 17:00:53.479 +05:30 [INF] Executed action BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals) in 120.9576ms
2025-10-29 17:00:53.483 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.UserController.GetUserDetails (BuddyGoals)'
2025-10-29 17:00:53.487 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/user/me - 200 null application/json; charset=utf-8 171.7407ms
2025-10-29 17:21:12.148 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 17:21:12.188 +05:30 [INF] CORS policy execution successful.
2025-10-29 17:21:12.190 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 17:21:12.193 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 17:21:12.197 +05:30 [INF] Refresh token attempt
2025-10-29 17:21:12.239 +05:30 [INF] Request starting HTTP/2 GET https://localhost:5001/api/auth/refresh-token - null null
2025-10-29 17:21:12.246 +05:30 [INF] CORS policy execution successful.
2025-10-29 17:21:12.248 +05:30 [INF] Executing endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 17:21:12.251 +05:30 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller BuddyGoals.Controllers.AuthController (BuddyGoals).
2025-10-29 17:21:12.258 +05:30 [INF] Refresh token attempt
2025-10-29 17:21:27.302 +05:30 [ERR] An error occurred using the connection to database 'neondb' on server 'tcp://ep-blue-hill-a1lja5gt-pooler.ap-southeast-1.aws.neon.tech:5432'.
2025-10-29 17:21:27.306 +05:30 [ERR] An error occurred using the connection to database 'neondb' on server 'tcp://ep-blue-hill-a1lja5gt-pooler.ap-southeast-1.aws.neon.tech:5432'.
2025-10-29 17:21:27.378 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'BuddyGoals.Data.BuddyGoalsDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 52.220.170.93:5432
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 52.220.170.93:5432
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-29 17:21:27.382 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'BuddyGoals.Data.BuddyGoalsDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 52.220.170.93:5432
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 52.220.170.93:5432
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-29 17:21:27.771 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 15511.6226ms
2025-10-29 17:21:27.909 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 17:21:27.958 +05:30 [INF] Executed action BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals) in 15760.724ms
2025-10-29 17:21:28.068 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FHI:00000003
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 52.220.170.93:5432
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AuthMicroService.Repositories.RefreshTokenRepo.GetRefreshTokenAsync(String token)
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress)
   at BuddyGoals.Controllers.AuthController.RefreshToken()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext)
2025-10-29 17:21:28.072 +05:30 [INF] Executed endpoint 'BuddyGoals.Controllers.AuthController.RefreshToken (BuddyGoals)'
2025-10-29 17:21:28.203 +05:30 [ERR] Unhandled Exception. Trace Id:0HNGMP3VF1FHI:00000001
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 52.220.170.93:5432
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at AuthMicroService.Repositories.RefreshTokenRepo.GetRefreshTokenAsync(String token)
   at BuddyGoals.Services.AuthService.RefreshTokenAsync(HttpContext httpContext, String ipAddress)
   at BuddyGoals.Controllers.AuthController.RefreshToken()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at BuddyGoals.GlobalExceptionHandler.InvokeAsync(HttpContext httpContext)
2025-10-29 17:21:28.213 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 500 null application/json; charset=utf-8 15972.8157ms
2025-10-29 17:21:28.258 +05:30 [INF] Request finished HTTP/2 GET https://localhost:5001/api/auth/refresh-token - 499 null application/json; charset=utf-8 16108.7041ms
